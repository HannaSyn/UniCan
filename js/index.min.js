const animItems=document.querySelectorAll(".anim-items"),langBtn=document.querySelector(".lang"),iconMenu=document.querySelector(".navigation__burger"),menuBody=document.querySelector(".navigation__list"),fileInput=document.querySelector("#file"),fileName=document.querySelector("#file-name"),fileEdit=document.querySelector(".contact-form__file-edit"),fileRemove=document.querySelector("#file-remove"),form=document.getElementById("form"),name=document.getElementById("name"),email=document.getElementById("email"),message=document.getElementById("message"),popupWait=document.querySelector(".contact__popup-wait"),popupFill=document.querySelector(".contact__popup-fill"),popupSuccess=document.querySelector(".contact__popup-success"),popupBig=document.querySelector(".contact__popup-toobig"),popupError=document.querySelector(".contact__popup-error");function animateOnScroll(){for(let e=0;e<animItems.length;e++){const t=animItems[e],o=t.offsetHeight,n=offset(t).top,i=4;let l=window.innerHeight-o/i;o>window.innerHeight&&(l=window.innerHeight-window.innerHeight/i),pageYOffset>n-l&&pageYOffset<n+o?t.classList.add("active"):t.classList.remove("active")}}function offset(e){const t=e.getBoundingClientRect(),o=window.pageXOffset||document.documentElement.scrollLeft,n=window.pageXOffset||document.documentElement.scrollTop;return{top:t.top+n,left:t.left+o}}function openMenu(e){iconMenu.classList.toggle("open"),menuBody.classList.toggle("open")}function openLangList(e){langBtn.classList.add("open");e.target.classList.contains("lang")||langBtn.classList.remove("open")}function uploadFile(e){e.size>26214400&&showPopup(popupBig)}function removeFile(){fileInput.value="",fileName.textContent="",fileEdit.classList.remove("required")}async function formSend(e){e.preventDefault();let t=formValidate(),o=new FormData(form);if(o.append("file",fileInput.files[0]),t)showPopup(popupFill);else{showPopup(popupWait);let e=await fetch("sendmail.php",{method:"POST",body:o});if(e.ok){let t=await e.json();console.log(t.message),showPopup(popupSuccess),reset()}else showPopup(popupError)}}function showPopup(e){e.classList.add("show"),setTimeout(()=>{e.classList.remove("show")},2500)}function reset(){name.value="",email.value="",message.value="",removeFile()}function formValidate(){let e=0,t=document.querySelectorAll(".req");for(let o=0;o<t.length;o++){const n=t[o];formRemoveError(n),n.classList.contains("email")?emailTest(n)&&(formAddError(n),e++):""===n.value&&(formAddError(n),e++)}return 0!=e&&(console.log(e),!0)}function formAddError(e){e.previousElementSibling.classList.add("err"),e.classList.add("err")}function formRemoveError(e){e.previousElementSibling.classList.remove("err"),e.classList.remove("err")}function emailTest(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}fileInput.onchange=function(){uploadFile(this.files[0]),""!=fileName&&fileEdit.classList.add("required"),fileName.textContent=this.files[0].name},document.addEventListener("DOMContentLoaded",(function(){window.addEventListener("scroll",animateOnScroll),form.addEventListener("submit",formSend),langBtn.addEventListener("click",openLangList),iconMenu.addEventListener("click",openMenu),fileRemove.addEventListener("click",removeFile)}));