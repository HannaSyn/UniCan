const animItems=document.querySelectorAll(".anim-items"),langBtn=document.querySelector(".lang"),iconMenu=document.querySelector(".navigation__burger"),menuBody=document.querySelector(".navigation__list"),fileInput=document.querySelector("#file"),fileName=document.querySelector("#file-name"),fileEdit=document.querySelector(".contact-form__file-edit"),fileRemove=document.querySelector("#file-remove"),form=document.getElementById("form"),name=document.getElementById("name"),email=document.getElementById("email"),message=document.getElementById("message");function animateOnScroll(){for(let e=0;e<animItems.length;e++){const t=animItems[e],n=t.offsetHeight,o=offset(t).top,i=4;let l=window.innerHeight-n/i;n>window.innerHeight&&(l=window.innerHeight-window.innerHeight/i),pageYOffset>o-l&&pageYOffset<o+n?t.classList.add("active"):t.classList.remove("active")}}function offset(e){const t=e.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,o=window.pageXOffset||document.documentElement.scrollTop;return{top:t.top+o,left:t.left+n}}function openMenu(e){iconMenu.classList.toggle("open"),menuBody.classList.toggle("open")}function openLangList(e){langBtn.classList.add("open");e.target.classList.contains("lang")||langBtn.classList.remove("open")}function uploadFile(e){e.size>26214400&&alert("error size")}function removeFile(){fileInput.value="",fileName.textContent="",fileEdit.classList.remove("required")}async function formSend(e){e.preventDefault();let t=formValidate(form),n=new FormData(form);if(n.append("file",fileInput.files[0]),t)console.log("Fill form");else{let e=await fetch("sendmail.php",{method:"POST",body:n});if(e.ok){let t=await e.json();alert(t.message),reset()}else alert("Error")}}function reset(){name.value="",email.value="",message.value="",removeFile()}function formValidate(e){let t=document.querySelectorAll(".req");for(let e=0;e<t.length;e++){const n=t[e];formRemoveError(n),n.classList.contains("email")?emailTest(n)&&(formAddError(n)):""===n.value&&(formAddError(n))}}function formAddError(e){e.previousElementSibling.classList.add("err"),e.classList.add("err")}function formRemoveError(e){e.previousElementSibling.classList.remove("err"),e.classList.remove("err")}function emailTest(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}fileInput.onchange=function(){uploadFile(this.files[0]),""!=fileName&&fileEdit.classList.add("required"),fileName.textContent=this.files[0].name},document.addEventListener("DOMContentLoaded",(function(){window.addEventListener("scroll",animateOnScroll),form.addEventListener("submit",formSend),langBtn.addEventListener("click",openLangList),iconMenu.addEventListener("click",openMenu),fileRemove.addEventListener("click",removeFile)}));